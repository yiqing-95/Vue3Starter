<template>
    <!-- /** generate for table:  admin_menu | class: AdminMenu */ -->



    <el-form ref="ruleFormRef" :model="ruleForm" :rules="rules" label-width="120px" class="demo-ruleForm" :size="formSize"
        status-icon>

        <el-form-item label="ID" prop="id">

            <el-input v-model="ruleForm.id" /> </el-form-item>





        <el-form-item label="Root" prop="root">

            <el-input v-model="ruleForm.root" /> </el-form-item>





        <el-form-item label="Lft" prop="lft">

            <el-input v-model="ruleForm.lft" /> </el-form-item>





        <el-form-item label="Rgt" prop="rgt">

            <el-input v-model="ruleForm.rgt" /> </el-form-item>





        <el-form-item label="Level" prop="level">

            <el-input v-model="ruleForm.level" /> </el-form-item>





        <el-form-item label="Label" prop="label">

            <el-input v-model="ruleForm.label" /> </el-form-item>





        <el-form-item
            label="url å¦‚ array(user/create); æˆ–è€…user/create  //user/create æœåŠ¡ç«¯å¤„ç†æ—¶è¦åˆ¤æ–­æ˜¯å¦è½¬ä¸ºarray è¦è€ƒè™‘å¦‚æœé‡‡ç”¨å‰è€…åˆ†å·çš„é—®é¢˜ evalå‡½æ•°"
            prop="url" v-show="isShow">

            <el-input v-model="ruleForm.url" /> </el-form-item>



        <el-form-item label="url åçš„è¯·æ±‚å‚æ•°" prop="params" v-show="isShow">

            <el-input v-model="ruleForm.params" /> </el-form-item>



        <el-form-item label="Ajaxoptions" prop="ajaxoptions" v-show="isShow">

            <el-input v-model="ruleForm.ajaxoptions" /> </el-form-item>



        <el-form-item label="Htmloptions" prop="htmloptions" v-show="isShow">

            <el-input v-model="ruleForm.htmloptions" /> </el-form-item>



        <el-form-item label="Is Visible" prop="is_visible" v-show="isShow">

            <el-input v-model="ruleForm.is_visible" /> </el-form-item>



        <el-form-item label="è°çš„æ ‘ ç³»ç»Ÿé»˜è®¤çš„æ˜¯åå°æ ‘0 " prop="uid" v-show="isShow">

            <el-input v-model="ruleForm.uid" /> </el-form-item>



        <el-form-item label="å½’ç±»ç è¡¨ç¤ºç”¨é€”çš„ ä¸€èˆ¬åªéœ€è¦æ ‡è®°æ ¹çš„ç”¨é€”å³å¯ ä¹Ÿå¯ä»¥è€ƒè™‘ç”¨eav ä½†è€ƒè™‘åˆ°æŸ¥è¯¢é—®é¢˜ æ‰€ä»¥å¼•å…¥äº†æ­¤å­—æ®µ" prop="group_code" v-show="isShow">

            <el-input v-model="ruleForm.group_code" /> </el-form-item>





        <el-form-item>

            <el-button class="arrow" :icon="isShow ? ArrowUp : ArrowDown" @click="isShow = !isShow">

            </el-button>

            <el-button type="primary" @click="submitForm(ruleFormRef)">Create</el-button>

            <el-button @click="resetForm(ruleFormRef)">Reset</el-button>

        </el-form-item>

    </el-form>
</template>
  
  <!-- <script lang="ts" setup> -->
  
<script setup>

import { reactive, ref } from 'vue'

// import type { FormInstance, FormRules } from 'element-plus'



// å¼•å…¥å›¾æ ‡

import { ArrowUp, ArrowDown } from '@element-plus/icons-vue'



/*
 
import {  getCurrentInstance} from 'vue'
 
const {ctx} = getCurrentInstance() // è¿™ä¸ªé‡Œé¢æœ‰ä¸å°‘ä¸œè¥¿å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨çš„ğŸ˜„
 
console.log('[crud-form]:', ctx)
 
*/

/*
 
interface RuleForm {
 
  name: string
 
 ...
 
}
 
interface AdminMenu {
 
id: number,
 
root: number,
 
lft: number,
 
rgt: number,
 
level: number,
 
label: string,
 
url: string,
 
params: string,
 
ajaxoptions: string,
 
htmloptions: string,
 
is_visible: number,
 
uid: number,
 
group_code: string
 
}  */

const isShow = ref(false);



const formSize = ref('default')

// const ruleFormRef = ref<FormInstance>()

const ruleFormRef = ref()

// const ruleForm = reactive<RuleForm>({

const ruleForm = reactive(

    {

        "id": null,

        "root": null,

        "lft": null,

        "rgt": null,

        "level": null,

        "label": null,

        "url": null,

        "params": null,

        "ajaxoptions": null,

        "htmloptions": null,

        "is_visible": 1,

        "uid": 0,

        "group_code": "sys_admin_menu"

    })

// const rules = reactive<FormRules<RuleForm>>({

const rules = reactive(

    {

        "id": [

            {

                "type": "integer"

            }

        ],

        "root": [

            {

                "type": "integer"

            }

        ],

        "lft": [

            {

                "type": "integer"

            }

        ],

        "rgt": [

            {

                "type": "integer"

            }

        ],

        "level": [

            {

                "type": "integer"

            }

        ],

        "label": [

            {

                "type": "string"

            }

        ],

        "url": [

            {

                "type": "string"

            }

        ],

        "params": [

            {

                "type": "string"

            }

        ],

        "ajaxoptions": [

            {

                "type": "string"

            }

        ],

        "htmloptions": [

            {

                "type": "string"

            }

        ],

        "is_visible": [

            {

                "type": "integer"

            }

        ],

        "uid": [

            {

                "type": "integer"

            }

        ],

        "group_code": [

            {

                "type": "string"

            }

        ]

    })

// const submitForm = async (formEl: FormInstance | undefined) => {

const submitForm = async (formEl) => {

    if (!formEl) return

    await formEl.validate((valid, fields) => {

        if (valid) {

            console.log('submit!')

            alert('TODO: should call some api to accomplish the creation')

        } else {

            console.log('error submit!', fields)

        }

    })

}

// const resetForm = (formEl: FormInstance | undefined) => {

const resetForm = (formEl) => {

    if (!formEl) return

    formEl.resetFields()

}

</script>
  